# Test file I/O operations

def test_write_and_read() -> int:
    let path: str = "/tmp/bp_test_io.txt"
    file_write(path, "Hello, BetterPython!")
    let content: str = file_read(path)
    if content != "Hello, BetterPython!":
        print("FAIL: write/read mismatch")
        return 1
    file_delete(path)
    print("  Write and read: PASS")
    return 0

def test_file_exists() -> int:
    let path: str = "/tmp/bp_test_exists.txt"
    if file_exists(path):
        print("FAIL: file should not exist yet")
        return 1
    file_write(path, "test")
    if not file_exists(path):
        print("FAIL: file should exist after write")
        return 1
    file_delete(path)
    if file_exists(path):
        print("FAIL: file should not exist after delete")
        return 1
    print("  File exists: PASS")
    return 0

def test_file_append() -> int:
    let path: str = "/tmp/bp_test_append.txt"
    file_write(path, "Line 1\n")
    file_append(path, "Line 2\n")
    file_append(path, "Line 3\n")
    let content: str = file_read(path)
    if not str_contains(content, "Line 1"):
        print("FAIL: missing Line 1")
        return 1
    if not str_contains(content, "Line 2"):
        print("FAIL: missing Line 2")
        return 1
    if not str_contains(content, "Line 3"):
        print("FAIL: missing Line 3")
        return 1
    file_delete(path)
    print("  File append: PASS")
    return 0

def test_file_size() -> int:
    let path: str = "/tmp/bp_test_size.txt"
    file_write(path, "12345")
    let size: int = file_size(path)
    if size != 5:
        print("FAIL: expected size 5, got:")
        print(size)
        return 1
    file_delete(path)
    print("  File size: PASS")
    return 0

def test_file_copy() -> int:
    let src: str = "/tmp/bp_test_copy_src.txt"
    let dst: str = "/tmp/bp_test_copy_dst.txt"
    file_write(src, "copy me")
    file_copy(src, dst)
    let content: str = file_read(dst)
    if content != "copy me":
        print("FAIL: copy content mismatch")
        return 1
    file_delete(src)
    file_delete(dst)
    print("  File copy: PASS")
    return 0

def test_empty_file() -> int:
    let path: str = "/tmp/bp_test_empty.txt"
    file_write(path, "")
    let content: str = file_read(path)
    if len(content) != 0:
        print("FAIL: empty file should have length 0")
        return 1
    let size: int = file_size(path)
    if size != 0:
        print("FAIL: empty file size should be 0")
        return 1
    file_delete(path)
    print("  Empty file: PASS")
    return 0

def test_large_content() -> int:
    let path: str = "/tmp/bp_test_large.txt"
    let content: str = str_repeat("abcdefghij", 100)
    file_write(path, content)
    let read_back: str = file_read(path)
    if len(read_back) != 1000:
        print("FAIL: large file length mismatch")
        return 1
    file_delete(path)
    print("  Large content: PASS")
    return 0

def main() -> int:
    print("Testing file I/O...")
    let failures: int = 0
    failures = failures + test_write_and_read()
    failures = failures + test_file_exists()
    failures = failures + test_file_append()
    failures = failures + test_file_size()
    failures = failures + test_file_copy()
    failures = failures + test_empty_file()
    failures = failures + test_large_content()
    if failures == 0:
        print("All file I/O tests passed!")
    return failures
